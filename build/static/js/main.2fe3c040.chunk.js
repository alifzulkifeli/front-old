(this["webpackJsonpjombeli-front"]=this["webpackJsonpjombeli-front"]||[]).push([[0],{132:function(e,t,a){e.exports=a(272)},159:function(e,t){},176:function(e,t){},178:function(e,t){},215:function(e,t){},216:function(e,t){},272:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(23),o=a.n(c),l=a(4),i=a(24),s=a(6),m=a(2),u="http://localhost:8000/api",p=function(e,t){"undefined"!==typeof window&&(localStorage.setItem("jwt",JSON.stringify(e)),t())},d=function(){return"undefined"!=typeof window&&(!!localStorage.getItem("jwt")&&JSON.parse(localStorage.getItem("jwt")))};function f(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function g(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?f(a,!0).forEach((function(t){Object(s.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):f(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var b=function(e){"undefined"!==typeof window&&(localStorage.removeItem("cart"),e())},E=function(e,t){return e.location.pathname===t?{color:"#ff9900"}:{color:"#ffffff"}},h=Object(i.g)((function(e){var t=e.history;return r.a.createElement("div",null,r.a.createElement("ul",{className:"nav nav-tabs bg-primary"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(l.b,{className:"nav-link",style:E(t,"/"),to:"/"},"Home")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(l.b,{className:"nav-link",style:E(t,"/shop"),to:"/shop"},"Shop")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(l.b,{className:"nav-link",style:E(t,"/mercari"),to:"/mercari"},"Mercari")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(l.b,{className:"nav-link",style:E(t,"/cart"),to:"/cart"},"Cart"," ",r.a.createElement("sup",null,r.a.createElement("small",{className:"cart-badge"},"undefined"!==typeof window&&localStorage.getItem("cart")?JSON.parse(localStorage.getItem("cart")).length:0)))),d()&&0===d().user.role&&r.a.createElement("li",{className:"nav-item"},r.a.createElement(l.b,{className:"nav-link",style:E(t,"/user/dashboard"),to:"/user/dashboard"},"Dashboard")),d()&&1===d().user.role&&r.a.createElement("li",{className:"nav-item"},r.a.createElement(l.b,{className:"nav-link",style:E(t,"/admin/dashboard"),to:"/admin/dashboard"},"Dashboard")),!d()&&r.a.createElement(n.Fragment,null,r.a.createElement("li",{className:"nav-item"},r.a.createElement(l.b,{className:"nav-link",style:E(t,"/signin"),to:"/signin"},"Signin")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(l.b,{className:"nav-link",style:E(t,"/signup"),to:"/signup"},"Signup"))),d()&&r.a.createElement("li",{className:"nav-item"},r.a.createElement("span",{className:"nav-link",style:{cursor:"pointer",color:"#ffffff"},onClick:function(){return function(e){if("undefined"!==typeof window)return localStorage.removeItem("jwt"),e(),fetch("".concat(u,"/signout"),{method:"GET"}).then((function(e){console.log("signout",e)})).catch((function(e){return console.log(e)}))}((function(){t.push("/")}))}},"Signout"))))})),v=(a(53),Object(i.g)((function(){return r.a.createElement("div",{class:"bottom section-padding"},r.a.createElement("div",{class:"container"},r.a.createElement("div",{class:"row"},r.a.createElement("div",{class:"col-md-12 text-center"},r.a.createElement("div",{class:"copyright"},r.a.createElement("p",null,"\xa9 ",r.a.createElement("span",null,"2019")," ",r.a.createElement("a",{href:"#",class:"transition"},"jombeli")," All rights reserved."))))))}))),y=function(e){var t=e.title,a=void 0===t?"Title":t,n=e.description,c=void 0===n?"Description":n,o=e.className,l=e.children;return r.a.createElement("div",null,r.a.createElement(h,null),r.a.createElement("div",{className:"jumbotron"},r.a.createElement("h2",null,a),r.a.createElement("p",{className:"lead"},c)),r.a.createElement("div",{className:o},l),r.a.createElement(v,null))};function N(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function O(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?N(a,!0).forEach((function(t){Object(s.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):N(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var j=function(){var e=Object(n.useState)({name:"",email:"",password:"",error:"",success:!1}),t=Object(m.a)(e,2),a=t[0],c=t[1],o=a.name,i=a.email,p=a.password,d=a.success,f=a.error,g=function(e){return function(t){c(O({},a,Object(s.a)({error:!1},e,t.target.value)))}},b=function(e){var t;e.preventDefault(),c(O({},a,{error:!1})),(t={name:o,email:i,password:p},fetch("".concat(u,"/signup"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()})).catch((function(e){console.log(e)}))).then((function(e){e.error?c(O({},a,{error:e.error,success:!1})):c(O({},a,{name:"",email:"",password:"",error:"",success:!0}))}))};return r.a.createElement(y,{title:"Signup",description:"Signup to TOPH",className:"container col-md-8 offset-md-2"},r.a.createElement("div",{className:"alert alert-info",style:{display:d?"":"none"}},"New account is created. Please check your email for account activation"),r.a.createElement("div",{className:"alert alert-danger",style:{display:f?"":"none"}},f),r.a.createElement("form",null,r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-muted"},"Name"),r.a.createElement("input",{onChange:g("name"),type:"text",className:"form-control",value:o})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-muted"},"Email"),r.a.createElement("input",{onChange:g("email"),type:"email",className:"form-control",value:i})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-muted"},"Password"),r.a.createElement("input",{onChange:g("password"),type:"password",className:"form-control",value:p})),r.a.createElement("button",{onClick:b,className:"btn btn-primary"},"Submit"),r.a.createElement(l.b,{to:"/auth/password/forgot",className:"btn ml-3 btn-outline-danger"},"Forgot Password")))},w=a(128),P=a.n(w),S=a(18),k=a.n(S),C=function(e){var t=e.informParent,a=void 0===t?function(e){return e}:t,n=function(e){console.log(e.tokenId),k()({method:"POST",url:"".concat("http://localhost:8000/api","/google-login"),data:{idToken:e.tokenId}}).then((function(e){console.log("GOOGLE SIGNIN SUCCESS",e),a(e)})).catch((function(e){console.log("GOOGLE SIGNIN ERROR",e.response)}))};return r.a.createElement("div",{className:"pb-3"},r.a.createElement(P.a,{clientId:"".concat("1065895723476-471gqk1p80hnfh123r83lit6fvvpnsvi.apps.googleusercontent.com"),onSuccess:n,onFailure:n,render:function(e){return r.a.createElement("button",{onClick:e.onClick,disabled:e.disabled,className:"btn btn-danger btn-lg btn-block"},r.a.createElement("i",{className:"fab fa-google pr-2"})," Login with Google")},cookiePolicy:"single_host_origin"}))},x=a(129),T=a.n(x),D=function(e){var t=e.informParent,a=void 0===t?function(e){return e}:t;return r.a.createElement("div",{className:"pb-3"},r.a.createElement(T.a,{appId:"".concat("2529034400486641"),autoLoad:!1,callback:function(e){console.log(e),k()({method:"POST",url:"".concat("http://localhost:8000/api","/facebook-login"),data:{userID:e.userID,accessToken:e.accessToken}}).then((function(e){console.log("FACEBOOK SIGNIN SUCCESS",e),a(e)})).catch((function(e){console.log("FACEBOOK SIGNIN ERROR",e.response)}))},render:function(e){return r.a.createElement("button",{onClick:e.onClick,className:"btn btn-primary btn-lg btn-block"},r.a.createElement("i",{className:"fab fa-facebook pr-2"})," Login with Facebook")}}))};function A(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function I(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?A(a,!0).forEach((function(t){Object(s.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):A(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var R=function(){var e=Object(n.useState)({email:"alifzulkifeli@gmail.com",password:"aiman98",error:"",loading:!1,redirectToReferrer:!1}),t=Object(m.a)(e,2),a=t[0],c=t[1],o=a.email,f=a.password,g=a.loading,b=a.error,E=a.redirectToReferrer,h=d().user,v=function(e){return function(t){c(I({},a,Object(s.a)({error:!1},e,t.target.value)))}},N=function(e){e.preventDefault(),c(I({},a,{error:!1,loading:!0})),function(e){return fetch("".concat(u,"/signin"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).catch((function(e){console.log(e)}))}({email:o,password:f}).then((function(e){e.error?c(I({},a,{error:e.error,loading:!1})):p(e,(function(){c(I({},a,{redirectToReferrer:!0}))}))}))},O=function(e){p(e.data,(function(){c(I({},a,{redirectToReferrer:!0}))}))};return r.a.createElement(y,{title:"Signin",description:"Signin to TOPH",className:"container col-md-8 offset-md-2"},g&&r.a.createElement("div",{className:"alert alert-info"},r.a.createElement("h2",null,"Loading...")),r.a.createElement("div",{className:"alert alert-danger",style:{display:b?"":"none"}},b),r.a.createElement(C,{informParent:O}),r.a.createElement(D,{informParent:O}),r.a.createElement("form",null,r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-muted"},"Email"),r.a.createElement("input",{onChange:v("email"),type:"email",className:"form-control",value:o})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-muted"},"Password"),r.a.createElement("input",{onChange:v("password"),type:"password",className:"form-control",value:f})),r.a.createElement("button",{onClick:N,className:"btn btn-primary"},"Submit"),r.a.createElement(l.b,{to:"/auth/password/forgot",className:"btn ml-3 btn-outline-danger"},"Forgot Password")),E?h&&1===h.role?r.a.createElement(i.a,{to:"/admin/dashboard"}):r.a.createElement(i.a,{to:"/user/dashboard"}):d()?r.a.createElement(i.a,{to:"/"}):void 0)},_=a(130),G=a.n(_),B=function(){return fetch("".concat(u,"/categories"),{method:"GET"}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))},U=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n={limit:t,skip:e,filters:a};return fetch("".concat(u,"/products/by/search"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(n)}).then((function(e){return e.json()})).catch((function(e){console.log(e)}))},J=function(e,t,a){return fetch("".concat(u,"/order/create/").concat(e),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({order:a})}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))},M=function(e){var t=e.item;return r.a.createElement("div",{className:"product-img box text-center img-fluid alligator-turtle"},r.a.createElement("img",{src:"".concat(t.image1),alt:t.name,className:"mb-3 img-fluid "}))},q=a(30),F=a.n(q),z=function(e){var t=e.product,a=e.showViewProductButton,c=void 0===a||a,o=e.showAddToCartButton,s=void 0===o||o,u=e.cartUpdate,p=void 0!==u&&u,d=e.showRemoveProductButton,f=void 0!==d&&d,b=e.showDetails,E=void 0!==b&&b,h=e.setRun,v=void 0===h?function(e){return e}:h,y=e.run,N=void 0===y?void 0:y,O=Object(n.useState)(!1),j=Object(m.a)(O,2),w=j[0],P=j[1],S=Object(n.useState)(t.count),k=Object(m.a)(S,2),C=k[0],x=k[1],T=function(){!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=(arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){return e}),a=[];"undefined"!==typeof window&&(localStorage.getItem("cart")&&(a=JSON.parse(localStorage.getItem("cart"))),a.push(g({},e,{count:1})),a=Array.from(new Set(a.map((function(e){return e.name})))).map((function(e){return a.find((function(t){return t.name===e}))})),localStorage.setItem("cart",JSON.stringify(a)),t())}(t,P(!0))},D=function(e){return function(t){v(!N),x(t.target.value<1?1:t.target.value),t.target.value>=1&&function(e,t){var a=[];"undefined"!==typeof window&&(localStorage.getItem("cart")&&(a=JSON.parse(localStorage.getItem("cart"))),a.map((function(n,r){n._id===e&&(a[r].count=t)})),localStorage.setItem("cart",JSON.stringify(a)))}(e,t.target.value)}};return r.a.createElement("div",{className:"card mt-5 border border-primary"},r.a.createElement("div",{className:"card-header card-header-1 "},t.name),r.a.createElement("div",{className:"card-body"},function(e){if(e)return r.a.createElement(i.a,{to:"/cart"})}(w),r.a.createElement(M,{item:t}),r.a.createElement("p",{className:"card-p black-10"},"RM ",t.price),function(){if(t._id)return r.a.createElement("div",null,r.a.createElement("p",{className:"black-9"},"Category: ",t.category&&t.category.name),r.a.createElement("p",{className:"black-8"},"Added on ",F()(t.createdAt).fromNow()))}(),function(e){if(t._id)return e>0?r.a.createElement("span",{className:"badge badge-primary badge-pill"},"In Stock "):r.a.createElement("span",{className:"badge badge-primary badge-pill"},"Out of Stock ")}(t.quantity),r.a.createElement("br",null),function(e){return t._id?e&&r.a.createElement(l.b,{to:"/product/".concat(t._id),className:"mr-2"},r.a.createElement("button",{className:"btn btn-outline-primary mt-2 mb-2 card-btn-1"},"View Product")):e&&r.a.createElement("a",{href:t.link},r.a.createElement("button",{className:"btn btn-outline-primary  card-btn-1 mr-2"},"View Product"))}(c),function(e){return e&&r.a.createElement("button",{onClick:function(){T()},className:"btn btn-outline-warning mt-2 mb-2 card-btn-1  "},"Add to cart")}(s),function(e){return e&&r.a.createElement("p",{className:"card-p black-10"},t.description)}(E),function(e){return e&&r.a.createElement("button",{onClick:function(){!function(e){var t=[];"undefined"!==typeof window&&(localStorage.getItem("cart")&&(t=JSON.parse(localStorage.getItem("cart"))),t.map((function(a,n){a.name===e&&t.splice(n,1)})),localStorage.setItem("cart",JSON.stringify(t)))}(t.name),v(!N)},className:"btn btn-outline-danger mt-2 mb-2"},"Remove Product")}(f),function(e){return t._id?e&&r.a.createElement("div",null,r.a.createElement("div",{className:"input-group mb-3"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("span",{className:"input-group-text"},"Adjust Quantity")),r.a.createElement("input",{type:"number",className:"form-control",value:C,onChange:D(t._id)}))):e&&r.a.createElement("p",null,"you cannot edit product quantity, learn here")}(p)))};function L(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function K(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?L(a,!0).forEach((function(t){Object(s.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):L(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var $=function(){var e=Object(n.useState)({categories:[],category:"",search:"",results:[],searched:!1}),t=Object(m.a)(e,2),a=t[0],c=t[1],o=a.categories,l=a.category,i=a.search,p=a.results,d=a.searched;Object(n.useEffect)((function(){B().then((function(e){e.error?console.log(e.error):c(K({},e,{categories:e}))}))}),[]);var f=function(){i&&function(e){var t=G.a.stringify(e);return console.log("query",t),fetch("".concat(u,"/products/search?").concat(t),{method:"GET"}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))}({search:i||void 0,category:l}).then((function(e){e.error?console.log(e.error):c(K({},a,{results:e,searched:!0}))}))},g=function(e){e.preventDefault(),f()},b=function(e){return function(t){var n;c(K({},a,(n={},Object(s.a)(n,e,t.target.value),Object(s.a)(n,"searched",!1),n)))}},E=function(e,t){return e&&t.length>0?"Found ".concat(t.length," products"):e&&t.length<1?"No products found":void 0};return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"container mb-3"},r.a.createElement("form",{onSubmit:g},r.a.createElement("span",{className:"input-group-text"},r.a.createElement("div",{className:"input-group input-group-lg"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("select",{className:"btn mr-2",onChange:b("category")},r.a.createElement("option",{value:"All"},"All"),o.map((function(e,t){return r.a.createElement("option",{key:t,value:e._id},e.name)})))),r.a.createElement("input",{type:"search",className:"form-control",onChange:b("search"),placeholder:"Search by name",autoComplete:"on",name:"product-search"})),r.a.createElement("div",{className:"btn input-group-append",style:{border:"none"}},r.a.createElement("button",{className:"input-group-text"},"Search"))))),r.a.createElement("div",{className:"container-fluid mb-3"},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return r.a.createElement("div",null,r.a.createElement("h2",{className:"mt-4 mb-4"},E(d,e)),r.a.createElement("div",{className:"row"},e.map((function(e,t){return r.a.createElement("div",{className:"col-4 mb-3"},r.a.createElement(z,{key:t,product:e}))}))))}(p)))},H=function(){var e=Object(n.useState)([]),t=Object(m.a)(e,2),a=(t[0],t[1],Object(n.useState)([])),c=Object(m.a)(a,2),o=c[0],l=c[1],i=Object(n.useState)(!1),s=Object(m.a)(i,2),p=(s[0],s[1]),d=function(){var e;(e="createdAt",fetch("".concat(u,"/products?sortBy=").concat(e,"&order=desc&limit=8"),{method:"GET"}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))).then((function(e){console.log(e),e.error?p(e.error):l(e)}))};return Object(n.useEffect)((function(){d()}),[]),r.a.createElement(y,{title:"Welcome to TOPH",description:"The Best Way to Shopping In Japan",className:"container-fluid"},r.a.createElement($,null),r.a.createElement("h2",{className:"mb-4"},"New Arrivals"),r.a.createElement("div",{className:"row"},o.map((function(e,t){return r.a.createElement("div",{key:t,className:"col-sm-6 col-md-4 col-lg-3 col-xl-3 mb-3"},r.a.createElement(z,{product:e}))}))))},W=a(48),V=function(e){var t=e.component,a=Object(W.a)(e,["component"]);return r.a.createElement(i.b,Object.assign({},a,{render:function(e){return d()?r.a.createElement(t,e):r.a.createElement(i.a,{to:{pathname:"/signin",state:{from:e.location}}})}}))},Y=function(){var e=Object(n.useState)([]),t=Object(m.a)(e,2),a=t[0],c=t[1],o=d().user,i=o._id,s=o.name,p=o.email,f=o.role,g=d().token,b=function(e,t){(function(e,t){return fetch("".concat(u,"/orders/by/user/").concat(e),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)}}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))})(e,t).then((function(e){e.error?console.log(e.error):c(e)}))};Object(n.useEffect)((function(){b(i,g)}),[]);return r.a.createElement(y,{title:"Dashboard",description:"G'day ".concat(s,"!"),className:"container-fluid"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-3"},r.a.createElement("div",{className:"card"},r.a.createElement("h4",{className:"card-header"},"User Links"),r.a.createElement("ul",{className:"list-group"},r.a.createElement("li",{className:"list-group-item"},r.a.createElement(l.b,{className:"nav-link",to:"/cart"},"My Cart")),r.a.createElement("li",{className:"list-group-item"},r.a.createElement(l.b,{className:"nav-link",to:"/profile/".concat(i)},"Update Profile"))))),r.a.createElement("div",{className:"col-9"},r.a.createElement("div",{className:"card mb-5"},r.a.createElement("h3",{className:"card-header"},"User Information"),r.a.createElement("ul",{className:"list-group"},r.a.createElement("li",{className:"list-group-item"},s),r.a.createElement("li",{className:"list-group-item"},p),r.a.createElement("li",{className:"list-group-item"},1===f?"Admin":"Registered User"))),function(e){return r.a.createElement("div",{className:"card mb-5"},r.a.createElement("h3",{className:"card-header"},"Purchase history"),r.a.createElement("ul",{className:"list-group"},r.a.createElement("li",{className:"list-group-item"},e.map((function(e,t){return r.a.createElement("div",null,r.a.createElement("hr",null),e.products.map((function(e,t){return r.a.createElement("div",{key:t},r.a.createElement("h6",null,"Product name: ",e.name),r.a.createElement("h6",null,"Product price: $",e.price),r.a.createElement("h6",null,"Purchased date:"," ",F()(e.createdAt).fromNow()))})))})))))}(a))))},Q=function(e){var t=e.component,a=Object(W.a)(e,["component"]);return r.a.createElement(i.b,Object.assign({},a,{render:function(e){return d()&&1===d().user.role?r.a.createElement(t,e):r.a.createElement(i.a,{to:{pathname:"/signin",state:{from:e.location}}})}}))},X=function(){var e=d().user,t=(e._id,e.name),a=e.email,n=e.role;return r.a.createElement(y,{title:"Dashboard",description:"G'day ".concat(t,"!"),className:"container-fluid"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-3"},r.a.createElement("div",{className:"card"},r.a.createElement("h4",{className:"card-header"},"Admin Links"),r.a.createElement("ul",{className:"list-group"},r.a.createElement("li",{className:"list-group-item"},r.a.createElement(l.b,{className:"nav-link",to:"/create/category"},"Create Category")),r.a.createElement("li",{className:"list-group-item"},r.a.createElement(l.b,{className:"nav-link",to:"/create/product"},"Create Product")),r.a.createElement("li",{className:"list-group-item"},r.a.createElement(l.b,{className:"nav-link",to:"/admin/orders"},"View Orders")),r.a.createElement("li",{className:"list-group-item"},r.a.createElement(l.b,{className:"nav-link",to:"/admin/products"},"Manage Products"))))),r.a.createElement("div",{className:"col-9"},r.a.createElement("div",{className:"card mb-5"},r.a.createElement("h3",{className:"card-header"},"User Information"),r.a.createElement("ul",{className:"list-group"},r.a.createElement("li",{className:"list-group-item"},t),r.a.createElement("li",{className:"list-group-item"},a),r.a.createElement("li",{className:"list-group-item"},1===n?"Admin":"Registered User"))))))},Z=function(){return fetch("".concat(u,"/categories"),{method:"GET"}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))},ee=function(){var e=Object(n.useState)(""),t=Object(m.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(!1),i=Object(m.a)(o,2),s=i[0],p=i[1],f=Object(n.useState)(!1),g=Object(m.a)(f,2),b=g[0],E=g[1],h=d(),v=h.user,N=h.token,O=function(e){p(""),c(e.target.value)},j=function(e){e.preventDefault(),p(""),E(!1),function(e,t,a){return fetch("".concat(u,"/category/create/").concat(e),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify(a)}).then((function(e){return e.json()})).catch((function(e){console.log(e)}))}(v._id,N,{name:a}).then((function(e){e.error?p(e.error):(p(""),E(!0))}))};return r.a.createElement(y,{title:"Add a new category",description:"G'day ".concat(v.name,", ready to add a new category?")},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-8 offset-md-2"},function(){if(b)return r.a.createElement("h3",{className:"text-success"},a," is created")}(),function(){if(s)return r.a.createElement("h3",{className:"text-danger"},"Category should be unique")}(),r.a.createElement("form",{onSubmit:j},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-muted"},"Name"),r.a.createElement("input",{type:"text",className:"form-control",onChange:O,value:a,autoFocus:!0,required:!0})),r.a.createElement("button",{className:"btn btn-outline-primary"},"Create Category")),r.a.createElement("div",{className:"mt-5"},r.a.createElement(l.b,{to:"/admin/dashboard",className:"text-warning"},"Back to Dashboard")))))},te=a(26),ae=a.n(te),ne=a(49);a(159),a(31);function re(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function ce(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?re(a,!0).forEach((function(t){Object(s.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):re(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var oe=function(){var e=Object(n.useState)({name:"",description:"",price:"",categories:[],category:"",shipping:"",images:"",quantity:"",loading:!1,error:"",createdProduct:"",redirectToProfile:!1,formData:""}),t=Object(m.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)({image1:"",image2:"",image3:"",image4:"",image5:"",image6:""}),l=Object(m.a)(o,2),i=l[0],p=l[1],f=d(),g=f.user,b=f.token,E=a.name,h=a.description,v=a.price,N=a.categories,O=(a.category,a.shipping,a.images,a.quantity),j=a.loading,w=a.error,P=a.createdProduct,S=(a.redirectToProfile,a.formData),k=i.image1,C=i.image2,x=i.image3,T=i.image4,D=i.image5,A=i.image6;Object(n.useEffect)((function(){Z().then((function(e){e.error?c(ce({},a,{error:e.error})):c(ce({},a,{categories:e,formData:new FormData}))}))}),[]);var I=function(e){return function(t){var n=t.target.value;S.set(e,n),c(ce({},a,Object(s.a)({},e,n)))}},R=function(e){e.preventDefault(),S.append("image1",k),S.append("image2",C),S.append("image3",x),S.append("image4",T),S.append("image5",D),S.append("image6",A),c(ce({},a,{error:"",loading:!0})),console.log(a),function(e,t,a){return fetch("".concat(u,"/product/create/").concat(e),{method:"POST",headers:{Accept:"application/json",Authorization:"Bearer ".concat(t)},body:a}).then((function(e){return e.json()})).catch((function(e){console.log(e)}))}(g._id,b,S).then((function(e){var t=!0,n=!1,r=void 0;try{for(var o,l=S.entries()[Symbol.iterator]();!(t=(o=l.next()).done);t=!0){var i=o.value;console.log(i[0]+", "+i[1])}}catch(s){n=!0,r=s}finally{try{t||null==l.return||l.return()}finally{if(n)throw r}}e.error?c(ce({},a,{error:e.error})):(c(ce({},a,{name:"",description:"",photo:"",price:"",quantity:"",loading:!1,createdProduct:e.name})),p({image1:"",image2:"",image3:"",image4:"",image5:"",image6:""}))}))},_=function(e){return function(){var t=Object(ne.a)(ae.a.mark((function t(a){var n,r,c,o;return ae.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.target.files,(r=new FormData).append("file",n[0]),r.append("upload_preset","jombeli"),t.next=6,fetch("https://api.cloudinary.com/v1_1/drzyjnnsq/image/upload",{method:"POST",body:r});case 6:return c=t.sent,t.next=9,c.json();case 9:o=t.sent,p(ce({},i,Object(s.a)({},e,o.secure_url)));case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},G=function(e){c(Object(s.a)({},e.target.value,""))};return r.a.createElement(y,{title:"Add a new product",description:"G'day ".concat(g.name,", ready to add a new product?")},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-8 offset-md-2"},j&&r.a.createElement("div",{className:"alert alert-success"},r.a.createElement("h2",null,"Loading...")),r.a.createElement("div",{className:"alert alert-info",style:{display:P?"":"none"}},r.a.createElement("h2",null,"".concat(P)," is created!")),r.a.createElement("div",{className:"alert alert-danger",style:{display:w?"":"none"}},w),r.a.createElement("form",{className:"mb-3",onSubmit:R},r.a.createElement("div",null,r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-muted"},"Image"),k?r.a.createElement("div",null,r.a.createElement("img",{src:k,className:"img-thumbnail rounded img form",alt:""}),r.a.createElement("button",{className:"button button-danger",value:"image1",onClick:G},"delete")):r.a.createElement("div",null,r.a.createElement("input",{onChange:_("image1"),type:"file",className:"form-control-file",multiple:!0}))),r.a.createElement("div",{className:"form-group"},C?r.a.createElement("div",null,r.a.createElement("img",{src:C,className:"img-thumbnail rounded img form",alt:""}),r.a.createElement("button",{className:"button button-danger",value:"image2",onClick:G},"delete")):r.a.createElement("div",null,r.a.createElement("input",{onChange:_("image2"),type:"file",className:"form-control-file",multiple:!0}))),r.a.createElement("div",{className:"form-group"},x?r.a.createElement("div",null,r.a.createElement("img",{src:x,className:"img-thumbnail rounded img form",alt:""}),r.a.createElement("button",{className:"button button-danger",value:"image3",onClick:G},"delete")):r.a.createElement("div",null,r.a.createElement("input",{onChange:_("image3"),type:"file",className:"form-control-file",multiple:!0}))),r.a.createElement("div",{className:"form-group"},T?r.a.createElement("div",null,r.a.createElement("img",{src:T,className:"img-thumbnail rounded img form",alt:""}),r.a.createElement("button",{className:"button button-danger",value:"image4",onClick:G},"delete")):r.a.createElement("div",null,r.a.createElement("input",{onChange:_("image4"),type:"file",className:"form-control-file",multiple:!0}))),r.a.createElement("div",{className:"form-group"},D?r.a.createElement("div",null,r.a.createElement("img",{src:D,className:"img-thumbnail rounded img form",alt:""}),r.a.createElement("button",{className:"button button-danger",value:"image5",onClick:G},"delete")):r.a.createElement("div",null,r.a.createElement("input",{onChange:_("image5"),type:"file",className:"form-control-file",multiple:!0}))),r.a.createElement("div",{className:"form-group"},A?r.a.createElement("div",null,r.a.createElement("img",{src:A,className:"img-thumbnail rounded img form",alt:""}),r.a.createElement("button",{className:"button button-danger",value:"image6",onClick:G},"delete")):r.a.createElement("div",null,r.a.createElement("input",{onChange:_("image6"),type:"file",className:"form-control-file",multiple:!0})))),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-muted"},"Name"),r.a.createElement("input",{onChange:I("name"),type:"text",className:"form-control",value:E})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-muted"},"Description"),r.a.createElement("textarea",{onChange:I("description"),className:"form-control",value:h})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-muted"},"Price"),r.a.createElement("input",{onChange:I("price"),type:"number",className:"form-control",value:v})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-muted"},"Category"),r.a.createElement("select",{onChange:I("category"),className:"form-control"},r.a.createElement("option",null,"Please select"),N&&N.map((function(e,t){return r.a.createElement("option",{key:t,value:e._id},e.name)})))),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-muted"},"Shipping"),r.a.createElement("select",{onChange:I("shipping"),className:"form-control"},r.a.createElement("option",null,"Please select"),r.a.createElement("option",{value:"0"},"No"),r.a.createElement("option",{value:"1"},"Yes"))),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-muted"},"Quantity"),r.a.createElement("input",{onChange:I("quantity"),type:"number",className:"form-control",value:O})),r.a.createElement("button",{className:"btn btn-outline-primary"},"Create Product")))))},le=a(38),ie=function(e){var t=e.categories,a=e.handleFilters,c=Object(n.useState)([]),o=Object(m.a)(c,2),l=o[0],i=o[1],s=function(e){return function(){var t=l.indexOf(e),n=Object(le.a)(l);-1===t?n.push(e):n.splice(t,1),i(n),a(n)}};return t.map((function(e,t){return r.a.createElement("li",{key:t,className:"list-unstyled"},r.a.createElement("input",{onChange:s(e._id),value:l.indexOf(-1===e._id),type:"checkbox",className:"form-check-input"}),r.a.createElement("label",{className:"form-check-label"},e.name))}))},se=function(e){var t=e.prices,a=e.handleFilters,c=Object(n.useState)(0),o=Object(m.a)(c,2),l=(o[0],o[1]),i=function(e){a(e.target.value),l(e.target.value)};return t.map((function(e,t){return r.a.createElement("div",{key:t},r.a.createElement("input",{onChange:i,value:"".concat(e._id),name:e,type:"radio",className:"mr-2 ml-4"}),r.a.createElement("label",{className:"form-check-label"},e.name))}))},me=[{_id:0,name:"Any",array:[]},{_id:1,name:"$0 to $9",array:[0,9]},{_id:2,name:"$10 to $19",array:[10,19]},{_id:3,name:"$20 to $29",array:[20,29]},{_id:4,name:"$30 to $39",array:[20,29]},{_id:5,name:"More than $40",array:[40,99]}];function ue(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var pe=function(){var e=Object(n.useState)({filters:{category:[],price:[]}}),t=Object(m.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)([]),l=Object(m.a)(o,2),i=l[0],u=l[1],p=Object(n.useState)(!1),d=Object(m.a)(p,2),f=(d[0],d[1]),g=Object(n.useState)(6),b=Object(m.a)(g,2),E=b[0],h=(b[1],Object(n.useState)(0)),v=Object(m.a)(h,2),N=v[0],O=v[1],j=Object(n.useState)(0),w=Object(m.a)(j,2),P=w[0],S=w[1],k=Object(n.useState)([]),C=Object(m.a)(k,2),x=C[0],T=C[1],D=function(e){U(N,E,e).then((function(e){e.error?f(e.error):(T(e.data),S(e.size),O(0))}))},A=function(){var e=N+E;U(e,E,a.filters).then((function(t){t.error?f(t.error):(T([].concat(Object(le.a)(x),Object(le.a)(t.data))),S(t.size),O(e))}))};Object(n.useEffect)((function(){B().then((function(e){e.error?f(e.error):u(e)})),D(N,a.filters)}),[]);var I=function(e,t){var n=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ue(a,!0).forEach((function(t){Object(s.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ue(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},a);if(n.filters[t]=e,"price"===t){var r=R(e);n.filters[t]=r}D(a.filters),c(n)},R=function(e){var t=me,a=[];for(var n in t)t[n]._id===parseInt(e)&&(a=t[n].array);return a};return r.a.createElement(y,{title:"Shop from TOPH",description:"Search and find product from our store",className:"container-fluid"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-4"},r.a.createElement("h4",null,"Filter by categories"),r.a.createElement("ul",null,r.a.createElement(ie,{categories:i,handleFilters:function(e){return I(e,"category")}})),r.a.createElement("h4",null,"Filter by price range"),r.a.createElement("div",null,r.a.createElement(se,{prices:me,handleFilters:function(e){return I(e,"price")}}))),r.a.createElement("div",{className:"col-8"},r.a.createElement("h2",{className:"mb-4"},"Products"),r.a.createElement("div",{className:"row"},x.map((function(e,t){return r.a.createElement("div",{key:t,className:"col-sm-12 col-md-6 col-lg-4 col-xl-4 mb-3"},r.a.createElement(z,{product:e}))}))),r.a.createElement("hr",null),P>0&&P>=E&&r.a.createElement("button",{onClick:A,className:"btn btn-warning mb-5"},"Load more"))))},de=function(e){var t=Object(n.useState)({}),a=Object(m.a)(t,2),c=a[0],o=a[1],l=Object(n.useState)([]),i=Object(m.a)(l,2),s=i[0],p=i[1],d=Object(n.useState)(!1),f=Object(m.a)(d,2),g=(f[0],f[1]),b=function(e){(function(e){return fetch("".concat(u,"/product/").concat(e),{method:"GET"}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))})(e).then((function(e){e.error?g(e.error):(o(e),function(e){return fetch("".concat(u,"/products/related/").concat(e),{method:"GET"}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))}(e._id).then((function(e){e.error?g(e.error):p(e)})))}))};return Object(n.useEffect)((function(){var t=e.match.params.productId;b(t)}),[e]),r.a.createElement(y,{title:c&&c.name,description:c&&c.description&&c.description.substring(0,100),className:"container-fluid"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-8"},c&&c.description&&r.a.createElement(z,{product:c,showViewProductButton:!1,showDetails:!0})),r.a.createElement("div",{className:"col-4"},r.a.createElement("h4",null,"Related products"),s.map((function(e,t){return r.a.createElement("div",{className:"mb-3",key:t},r.a.createElement(z,{product:e}))})))))},fe=a(131),ge=a.n(fe),be=a(39),Ee=a.n(be);function he(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function ve(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?he(a,!0).forEach((function(t){Object(s.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):he(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var ye=function(e){var t=e.products,a=e.setRun,c=void 0===a?function(e){return e}:a,o=e.run,i=void 0===o?void 0:o,p=Object(n.useState)({loading:!1,success:!1,clientToken:null,error:"",instance:{},receiver:"",address1:"",address2:"",city:"",poscode:"",shipping:0,state:"",receiptName:"",receiptData:"",paymentMethod:"",paid:!1,cart:!1}),f=Object(m.a)(p,2),g=f[0],E=f[1],h=Object(n.useState)("satu"),v=Object(m.a)(h,2),y=v[0],N=v[1],O=d()&&d().user._id,j=d()&&d().token,w=function(e,t){(function(e,t){return fetch("".concat(u,"/braintree/getToken/").concat(e),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)}}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))})(e,t).then((function(e){e.error?E(ve({},e,{error:e.error})):E({clientToken:e.clientToken})}))};Object(n.useEffect)((function(){w(O,j)}),[]);var P,S,k=function(e){return function(t){E(ve({},g,Object(s.a)({},e,t.target.value))),console.log(e)}},C=function(e){E(ve({},g,{receiptName:e.target.value}))},x=function(){var e=Object(ne.a)(ae.a.mark((function e(t){var a,n,r,c;return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.target.files,(n=new FormData).append("file",a[0]),n.append("upload_preset","jombeli-receipt"),e.next=6,fetch("https://api.cloudinary.com/v1_1/drzyjnnsq/image/upload",{method:"POST",body:n});case 6:return r=e.sent,e.next=9,r.json();case 9:c=e.sent,E(ve({},g,{receiptData:c.secure_url}));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=function(){N(!1)},D=function(){N(!0)},A=function(){return t.reduce((function(e,t){return e+t.count*t.price}),0)},I=function(e){return"Kelantan"===e?20:"Kedah"===e?10:0},R=function(e){return r.a.createElement("div",null,null!==g.clientToken&&t.length>0?r.a.createElement("div",{style:{display:e?"none":""}},r.a.createElement("button",{onClick:T,className:"btn btn-primary btn-block"},"Pay With Cash Deposit / ATM"),r.a.createElement("button",{onClick:D,className:"btn btn-primary btn-block"},"Pay With Credit Card / Paypal")):null)},_={name:g.receiver,line1:g.address1,line2:g.address2,city:g.city,poscode:g.poscode,state:g.state},G=g.receiptName,B=g.receiptData,U=function(){E({loading:!0}),Ee()(".btn-afterblur").attr("disabled",!0);var e;setTimeout((function(){Ee()(".btn-afterblur").attr("disabled",!1)}),5e3);g.instance.requestPaymentMethod().then((function(a){e=a.nonce;var n=A()+I(g.state);(function(e,t,a){return fetch("".concat(u,"/braintree/payment/").concat(e),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify(a)}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))})(O,j,{paymentMethodNonce:e,amount:n}).then((function(e){console.log(e);var a={products:t,transaction_id:e.transaction.id,amount:e.transaction.amount,address:_,receiptName:G,receiptData:B};J(O,j,a).then((function(e){b((function(){c(!i),console.log("payment success and empty cart"),E({loading:!1,success:!0,paid:!0})}))})).catch((function(e){console.log(e),E({loading:!1,paid:!0})}))})).catch((function(e){console.log(e),E({loading:!1,paid:!0})}))})).catch((function(e){E(ve({},g,{error:e.message}))}))},M=function(){E({loading:!0}),Ee()(".btn-afterblur").attr("disabled",!0);setTimeout((function(){Ee()(".btn-afterblur").attr("disabled",!1)}),5e3);var e={products:t,transaction_id:"CDM/ATM",amount:A()+I(g.state),address:_,receiptName:G,receiptData:B};J(O,j,e).then((function(){b((function(){c(!i),console.log("payment success and empty cart"),console.log(e.address),E({loading:!1,success:!0,paid:!0})}))})).catch((function(e){console.log(e),E({loading:!1,paid:!0})}))},q=function(e){return r.a.createElement("div",{className:"form-group mb-3 border border-primary p-3 rounded",style:{display:e?"none":""}},null!==g.clientToken&&t.length>0?r.a.createElement("div",null,r.a.createElement("label",{className:"text-muted"},"Delivery address:"),r.a.createElement("input",{onChange:k("receiver"),className:"form-control mt-2",value:g.name,placeholder:"name"}),r.a.createElement("input",{onChange:k("address1"),className:"form-control mt-2",value:g.address1,placeholder:"address1"}),r.a.createElement("input",{onChange:k("address2"),className:"form-control mt-2",value:g.address2,placeholder:"address2"}),r.a.createElement("input",{onChange:k("city"),className:"form-control mt-2",value:g.city,placeholder:"city"}),r.a.createElement("input",{onChange:k("poscode"),className:"form-control mt-2",value:g.poscode,type:"number",placeholder:"poscode"}),r.a.createElement("select",{className:"form-control mb-5 mt-2",onChange:k("state")},r.a.createElement("option",null,"state"),r.a.createElement("option",{value:"Terengganu"},"Terengganu"),r.a.createElement("option",{value:"Sarawak"},"Sarawak"),r.a.createElement("option",{value:"Sabah"},"Sabah"),r.a.createElement("option",{value:"Penang"},"Penang"),r.a.createElement("option",{value:"Perlis"},"Perlis"),r.a.createElement("option",{value:"Pahang"},"Pahang"),r.a.createElement("option",{value:"Negeri Sembilan"},"Negeri Sembilan"),r.a.createElement("option",{value:"Malacca"},"Malacca"),r.a.createElement("option",{value:"Selangor"},"Selangor"),r.a.createElement("option",{value:"Perak"},"Perak"),r.a.createElement("option",{value:"Kelantan"},"Kelantan"),r.a.createElement("option",{value:"Kedah"},"Kedah"),r.a.createElement("option",{value:"Johor"},"Johor"),r.a.createElement("option",{value:"Kuala Lumpur"},"Kuala Lumpur"),r.a.createElement("option",{value:"Putrajaya"},"Putrajaya"),r.a.createElement("option",{value:"Labuan"},"Labuan"))," "):null," ")},F=function(){if(!y)return!g.paid&&r.a.createElement("div",{className:"mt-5"},r.a.createElement("div",{className:" border border-primary p-3 rounded"},r.a.createElement("h5",null,"ATM/Cash Deposit"),r.a.createElement("p",{className:"mt-4"},"enter the bank name"),r.a.createElement("select",{className:"form-control mb-5",onChange:C},r.a.createElement("option",null,"choose bank name"),r.a.createElement("option",{value:"Maybank"},"Maybank"),r.a.createElement("option",{value:"bank islam"},"Bank Islam"),r.a.createElement("option",{value:"CIMB bank"},"CIMB bank")),r.a.createElement("p",null,"enter receipt image"),r.a.createElement("form",null,r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"btn btn-secondary"},r.a.createElement("input",{type:"file",onChange:x,accept:"image/*"})),r.a.createElement("img",{src:g.receiptData,className:"img-thumbnail rounded",alt:""})))),r.a.createElement("button",{onClick:M,className:"btn btn-afterblur btn-success btn-block"},"Pay"))},z=function(){if(y)return r.a.createElement("div",{className:"mt-5",onBlur:function(){return E(ve({},g,{error:""}))}},null!==g.clientToken&&t.length>0?r.a.createElement("div",{className:" border border-primary p-3 rounded"},r.a.createElement(ge.a,{options:{authorization:g.clientToken,paypal:{flow:"vault"}},onInstance:function(e){return g.instance=e}}),r.a.createElement("button",{onClick:U,className:"btn btn-success btn-block"},"Pay")):null)};return r.a.createElement("div",null,r.a.createElement("h2",null,"Total: RM ",A()+I(g.state)),g.loading&&r.a.createElement("h2",{className:"text-danger"},"Loading..."),(S=g.success,r.a.createElement("div",{className:"alert alert-info",style:{display:S?"":"none"}},"Thanks! Your payment was successful!")),(P=g.error,r.a.createElement("div",{className:"alert alert-danger",style:{display:P?"":"none"}},P)),d()?r.a.createElement("div",null,q(),R(g.paid),r.a.createElement("div",null,z()||F())):r.a.createElement(l.b,{to:"/signin"},r.a.createElement("button",{className:"btn btn-primary"},"Sign in to checkout")))},Ne=function(){var e=Object(n.useState)([]),t=Object(m.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(!1),i=Object(m.a)(o,2),s=i[0],u=i[1];Object(n.useEffect)((function(){c("undefined"!==typeof window&&localStorage.getItem("cart")?JSON.parse(localStorage.getItem("cart")):[])}),[s]);return r.a.createElement(y,{title:"Shopping Cart",description:"Manage your cart items. Add remove checkout or continue shopping.",className:"container-fluid"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-6"},a.length>0?function(e){return r.a.createElement("div",null,r.a.createElement("h2",null,"Your cart has ","".concat(e.length)," items"),r.a.createElement("hr",null),e.map((function(e,t){return r.a.createElement(z,{key:t,product:e,showAddToCartButton:!1,cartUpdate:!0,showRemoveProductButton:!0,setRun:u,run:s})})))}(a):r.a.createElement("h2",null,"Your cart is empty. ",r.a.createElement("br",null)," ",r.a.createElement(l.b,{to:"/shop"},"Continue shopping"))),r.a.createElement("div",{className:"col-6"},r.a.createElement("h2",{className:"mb-4"},"Your cart summary"),r.a.createElement("hr",null),r.a.createElement(ye,{products:a,setRun:u,run:s}))))},Oe=function(){var e=Object(n.useState)([]),t=Object(m.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)([]),l=Object(m.a)(o,2),i=l[0],s=l[1],p=d(),f=p.user,g=p.token,b=function(){(function(e,t){return fetch("".concat(u,"/order/list/").concat(e),{method:"GET",headers:{Accept:"application/json",Authorization:"Bearer ".concat(t)}}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))})(f._id,g).then((function(e){e.error?console.log(e.error):c(e)}))},E=function(){(function(e,t){return fetch("".concat(u,"/order/status-values/").concat(e),{method:"GET",headers:{Accept:"application/json",Authorization:"Bearer ".concat(t)}}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))})(f._id,g).then((function(e){e.error?console.log(e.error):s(e)}))};Object(n.useEffect)((function(){b(),E()}),[]);var h=function(e,t){return r.a.createElement("div",{className:"input-group mb-2 mr-sm-2"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("div",{className:"input-group-text"},e)),r.a.createElement("input",{type:"text",value:t,className:"form-control",readOnly:!0}))},v=function(e,t){(function(e,t,a,n){return fetch("".concat(u,"/order/").concat(a,"/status/").concat(e),{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({status:n,orderId:a})}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))})(f._id,g,t,e.target.value).then((function(e){e.error?console.log("Status update failed"):b()}))};return r.a.createElement(y,{title:"Orders",description:"G'day ".concat(f.name,", you can manage all the orders here"),className:"container-fluid"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-8 offset-md-2"},a.length>0?r.a.createElement("h1",{className:"text-danger display-2"},"Total orders: ",a.length):r.a.createElement("h1",{className:"text-danger"},"No orders"),a.map((function(e,t){return r.a.createElement("div",{className:"mt-5",key:t,style:{borderBottom:"5px solid indigo"}},r.a.createElement("h2",{className:"mb-5"},r.a.createElement("span",{className:"bg-primary"},"Order ID: ",e._id)),r.a.createElement("ul",{className:"list-group mb-2"},r.a.createElement("li",{className:"list-group-item"},function(e){return r.a.createElement("div",{className:"form-group"},r.a.createElement("h3",{className:"mark mb-4"},"Status: ",e.status),r.a.createElement("select",{className:"form-control",onChange:function(t){return v(t,e._id)}},r.a.createElement("option",null,"Update Status"),i.map((function(e,t){return r.a.createElement("option",{key:t,value:e},e)}))))}(e)),r.a.createElement("li",{className:"list-group-item"},"Transaction ID: ",e.transaction_id),r.a.createElement("li",{className:"list-group-item"},"Amount: $",e.amount),r.a.createElement("li",{className:"list-group-item"},"Ordered by: ",e.user.name),r.a.createElement("li",{className:"list-group-item"},"Ordered on:"," ",F()(e.createdAt).fromNow()),r.a.createElement("li",{className:"list-group-item"},"Delivery address: ",e.address)),r.a.createElement("h3",{className:"mt-4 mb-4 font-italic"},"Total products in the order:"," ",e.products.length),e.products.map((function(e,t){return r.a.createElement("div",{className:"mb-4",key:t,style:{padding:"20px",border:"1px solid indigo"}},h("Product name",e.name),h("Product price",e.price),h("Product total",e.count),h("Product Id",e._id))})))})))))},je=a(12);a(41);function we(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Pe(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?we(a,!0).forEach((function(t){Object(s.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):we(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Se=function(e){var t=e.match,a=Object(n.useState)({name:"",email:"",password:"",error:!1,buttonText:"Request password reset link",success:!1}),c=Object(m.a)(a,2),o=c[0],l=c[1],p=d().token,f=o.name,g=o.email,b=o.password,E=(o.error,o.success),h=o.buttonText,v=function(e){(function(e,t){return fetch("".concat(u,"/user/").concat(e),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)}}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))})(e,p).then((function(e){e.error?l(Pe({},o,{error:!0})):l(Pe({},o,{name:e.name,email:e.email}))}))};Object(n.useEffect)((function(){v(t.params.userId)}),[]);var N=function(e){return function(t){l(Pe({},o,Object(s.a)({error:!1},e,t.target.value)))}},O=function(e){e.preventDefault(),l(Pe({},o,{buttonText:"Submitting"})),k()({method:"PUT",url:"".concat("http://localhost:8000/api","/forgot-password"),data:{email:g}}).then((function(e){console.log("FORGOT PASSWORD SUCCESS",e),je.b.success(e.data.message),l(Pe({},o,{buttonText:"Requested"}))})).catch((function(e){console.log("FORGOT PASSWORD ERROR",e.response.data),je.b.error(e.response.data.error),l(Pe({},o,{buttonText:"Request password reset link"}))}))},j=function(e){e.preventDefault(),function(e,t,a){return fetch("".concat(u,"/user/").concat(e),{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify(a)}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))}(t.params.userId,p,{name:f,email:g,password:b}).then((function(e){e.error?console.lgo(e.error):function(e,t){if("undefined"!==typeof window&&localStorage.getItem("jwt")){var a=JSON.parse(localStorage.getItem("jwt"));a.user=e,localStorage.setItem("jwt",JSON.stringify(a)),t()}}(e,(function(){l(Pe({},o,{name:e.name,email:e.email,success:!0}))}))}))};return r.a.createElement(y,{title:"Profile",description:"Update your profile",className:"container-fluid"},r.a.createElement("h2",{className:"mb-4"},"Profile update"),function(e,t,a){return r.a.createElement("form",null,r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-muted"},"Name"),r.a.createElement("input",{type:"text",onChange:N("name"),className:"form-control",value:e})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-muted"},"Email"),r.a.createElement("input",{type:"email",onChange:N("email"),className:"form-control",value:t})),r.a.createElement("button",{onClick:O,className:"btn btn-success row ml-1 mb-3"},h),r.a.createElement("br",null),r.a.createElement("button",{onClick:j,className:"btn btn-primary"},"Submit"))}(f,g),function(e){if(e)return r.a.createElement(i.a,{to:"/user/dashboard"})}(E))},ke=function(){var e=Object(n.useState)([]),t=Object(m.a)(e,2),a=t[0],c=t[1],o=d(),i=o.user,s=o.token,p=function(){fetch("".concat(u,"/products?limit=undefined"),{method:"GET"}).then((function(e){return e.json()})).catch((function(e){return console.log(e)})).then((function(e){e.error?console.log(e.error):c(e)}))},f=function(e){(function(e,t,a){return fetch("".concat(u,"/product/").concat(e,"/").concat(t),{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(a)}}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))})(e,i._id,s).then((function(e){e.error?console.log(e.error):p()}))};return Object(n.useEffect)((function(){p()}),[]),r.a.createElement(y,{title:"Manage Products",description:"Perform CRUD on products",className:"container-fluid"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement("h2",{className:"text-center"},"Total ",a.length," products"),r.a.createElement("hr",null),r.a.createElement("ul",{className:"list-group"},a.map((function(e,t){return r.a.createElement("li",{key:t,className:"list-group-item d-flex justify-content-between align-items-center"},r.a.createElement("strong",null,e.name),r.a.createElement(l.b,{to:"/admin/product/update/".concat(e._id)},r.a.createElement("span",{className:"badge badge-warning badge-pill"},"Update")),r.a.createElement("span",{onClick:function(){return f(e._id)},className:"badge badge-danger badge-pill"},"Delete"))}))),r.a.createElement("br",null))))};function Ce(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function xe(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ce(a,!0).forEach((function(t){Object(s.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ce(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Te=function(e){var t=e.match,a=Object(n.useState)({name:"",description:"",price:"",categories:[],category:"",shipping:"",quantity:"",image1:"",image2:"",image3:"",image4:"",image5:"",image6:"",loading:!1,error:!1,createdProduct:"",redirectToProfile:!1,formData:""}),c=Object(m.a)(a,2),o=c[0],l=c[1],p=Object(n.useState)([]),f=Object(m.a)(p,2),g=f[0],b=f[1],E=d(),h=E.user,v=E.token,N=o.name,O=o.description,j=o.price,w=(o.category,o.shipping,o.image1),P=o.image2,S=o.image3,k=o.image4,C=o.image5,x=o.image6,T=o.quantity,D=o.loading,A=o.error,I=o.createdProduct,R=o.redirectToProfile,_=o.formData,G=function(e){(function(e){return fetch("".concat(u,"/product/").concat(e),{method:"GET"}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))})(e).then((function(e){e.error?l(xe({},o,{error:e.error})):(l(xe({},o,{name:e.name,description:e.description,price:e.price,image1:e.image1,image2:e.image2,image3:e.image3,image4:e.image4,image5:e.image5,image6:e.image6,category:e.category._id,shipping:e.shipping,quantity:e.quantity,formData:new FormData})),B())}))},B=function(){Z().then((function(e){e.error?l(xe({},o,{error:e.error})):b(e)}))};Object(n.useEffect)((function(){G(t.params.productId)}),[]);var U=function(e){return function(t){var a=t.target.value;_.set(e,a),l(xe({},o,Object(s.a)({},e,a)))}},J=function(e){e.preventDefault(),l(xe({},o,{error:"",loading:!0})),function(e,t,a,n){return fetch("".concat(u,"/product/").concat(e,"/").concat(t),{method:"PUT",headers:{Accept:"application/json",Authorization:"Bearer ".concat(a)},body:n}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))}(t.params.productId,h._id,v,_).then((function(e){e.error?l(xe({},o,{error:e.error})):(console.log(e),l(xe({},o,{name:"",description:"",photo:"",price:"",image1:"",image2:"",image3:"",image4:"",image5:"",image6:"",quantity:"",loading:!1,error:!1,redirectToProfile:!0,createdProduct:e.name})))}))};return r.a.createElement(y,{title:"Add a new product",description:"G'day ".concat(h.name,", ready to add a new product?")},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-8 offset-md-2"},D&&r.a.createElement("div",{className:"alert alert-success"},r.a.createElement("h2",null,"Loading...")),r.a.createElement("div",{className:"alert alert-info",style:{display:I?"":"none"}},r.a.createElement("h2",null,"".concat(I)," is updated!")),r.a.createElement("div",{className:"alert alert-danger",style:{display:A?"":"none"}},A),r.a.createElement("form",{className:"mb-3",onSubmit:J},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-muted"},"Image"),r.a.createElement("input",{onChange:U("image1"),type:"text",className:"form-control",value:w})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{onChange:U("image2"),type:"text",className:"form-control",value:P})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{onChange:U("image3"),type:"text",className:"form-control",value:S})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{onChange:U("image4"),type:"text",className:"form-control",value:k})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{onChange:U("image5"),type:"text",className:"form-control",value:C})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{onChange:U("image6"),type:"text",className:"form-control",value:x})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-muted"},"Name"),r.a.createElement("input",{onChange:U("name"),type:"text",className:"form-control",value:N})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-muted"},"Description"),r.a.createElement("textarea",{onChange:U("description"),className:"form-control",value:O})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-muted"},"Price"),r.a.createElement("input",{onChange:U("price"),type:"number",className:"form-control",value:j})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-muted"},"Category"),r.a.createElement("select",{onChange:U("category"),className:"form-control"},r.a.createElement("option",null,"Please select"),g&&g.map((function(e,t){return r.a.createElement("option",{key:t,value:e._id},e.name)})))),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-muted"},"Shipping"),r.a.createElement("select",{onChange:U("shipping"),className:"form-control"},r.a.createElement("option",null,"Please select"),r.a.createElement("option",{value:"0"},"No"),r.a.createElement("option",{value:"1"},"Yes"))),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-muted"},"Quantity"),r.a.createElement("input",{onChange:U("quantity"),type:"number",className:"form-control",value:T})),r.a.createElement("button",{className:"btn btn-outline-primary"},"Update Product")),function(){if(R&&!A)return r.a.createElement(i.a,{to:"/"})}())))};function De(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Ae(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?De(a,!0).forEach((function(t){Object(s.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):De(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Ie=function(){localStorage.setItem("M_Search",JSON.stringify(""));var e=localStorage.getItem("M_Search").replace(/['"]+/g,""),t=Object(n.useState)({categories:[],category:"",search:e,minPrice:"",maxPrice:"",results:[],searched:!1}),a=Object(m.a)(t,2),c=a[0],o=a[1],l=Object(n.useState)(!1),i=Object(m.a)(l,2),p=i[0],d=i[1],f=c.category,g=c.search,b=c.results,E=(c.searched,c.minPrice),h=c.maxPrice,v=c.page;Object(n.useEffect)((function(){}),[]);var y=function(){var e;d(!0),g&&(e={search:g||void 0,category:f},localStorage.setItem("M_Search",JSON.stringify(e.search)),fetch("".concat(u,"/mercari/search?page=").concat(v||1,"&min_price=").concat(Math.trunc(E/.038),"&max_price=").concat(Math.trunc(h/.038),"&search=").concat(g),{method:"GET"}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))).then((function(e){e.error?console.log(e.error):(o(Ae({},c,{results:e,searched:!0})),d(!1))}))},N=function(e){e.preventDefault(),y()},O=function(e){return function(t){var a;o(Ae({},c,(a={},Object(s.a)(a,e,t.target.value),Object(s.a)(a,"searched",!1),a)))}};return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"container mb-3"},r.a.createElement("form",{onSubmit:N},r.a.createElement("span",{className:"input-group-text"},r.a.createElement("div",{className:"input-group input-group-lg"},r.a.createElement("input",{type:"search",className:"form-control",onChange:O("search"),placeholder:"Search by name",value:c.search})),r.a.createElement("div",{className:"btn input-group-append",style:{border:"none"}},r.a.createElement("button",{className:"input-group-text"},"Search"))),r.a.createElement("span",{className:"input-group-text"},r.a.createElement("div",{className:"input-group input-group-lg"},r.a.createElement("input",{type:"number",className:"form-control",onChange:O("minPrice"),placeholder:"minumum price"}),r.a.createElement("input",{type:"number",className:"form-control",onChange:O("maxPrice"),placeholder:"maximum price"}),r.a.createElement("input",{type:"number",className:"form-control",onChange:O("page"),placeholder:"page number"}))))),r.a.createElement("div",{className:"container-fluid mb-3"},p&&r.a.createElement("div",{className:"alert alert-success"},r.a.createElement("h2",null,"Loading...")),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return r.a.createElement("div",null,r.a.createElement("div",{className:"row"},e.map((function(e,t){return r.a.createElement("div",{className:"col-4 mb-3"},r.a.createElement(z,{key:t,product:e,cartUpdate:!1}))}))))}(b)))},Re=function(e){var t=e.name,a=Object(n.useState)({results:[]}),c=Object(m.a)(a,2),o=c[0],l=c[1],i=o.results;Object(n.useEffect)((function(){s()}),[]);var s=function(){fetch("".concat(u,"/mercari/search?page=1&search=").concat(t),{method:"GET"}).then((function(e){return e.json()})).catch((function(e){return console.log(e)})).then((function(e){e.error?console.log(e.error):l(Ae({},o,{results:e.slice(0,8)}))}))};return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"container-fluid mb-3"},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return r.a.createElement("div",null,r.a.createElement("div",{className:"row"},e.map((function(e,t){return r.a.createElement("div",{className:"col-sm-6 col-md-4 col-lg-3 col-xl-3 mb-3"},r.a.createElement(z,{key:t,product:e,cartUpdate:!1}))}))))}(i)))},_e=function(){return Object(n.useEffect)((function(){}),[]),r.a.createElement(y,{title:"Shop from Mercari",description:"Get item directly from the largest preloved site at japan",className:"container-fluid"},r.a.createElement(Ie,null),r.a.createElement("h2",null,"Famous Item"),r.a.createElement("h4",{className:"text-center"},"G-SHOCK"),r.a.createElement(Re,{name:"casiogshock"}),r.a.createElement("h4",{className:"text-center  mt-3"},"BAG"),r.a.createElement(Re,{name:"gregory"}),r.a.createElement("h4",{className:"text-center  mt-3"},"SHIRT"),r.a.createElement(Re,{name:"duck dude"}),r.a.createElement("h4",{className:"text-center  mt-3"},"CAP"),r.a.createElement(Re,{name:"new era"}),r.a.createElement("h4",{className:"text-center  mt-3"},"BATHING APE"),r.a.createElement(Re,{name:"bathing ape"}))},Ge=a(50),Be=a.n(Ge);function Ue(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Je(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ue(a,!0).forEach((function(t){Object(s.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ue(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Me=function(e){var t=e.match,a=Object(n.useState)({name:"",token:"",show:!0}),c=Object(m.a)(a,2),o=c[0],l=c[1];Object(n.useEffect)((function(){var e=t.params.token,a=Be.a.decode(e).name;e&&l(Je({},o,{name:a,token:e}))}),[]);var i=o.name,s=o.token,u=(o.show,function(e){e.preventDefault(),k()({method:"POST",url:"".concat("http://localhost:8000/api","/account-activation"),data:{token:s}}).then((function(e){console.log("ACCOUNT ACTIVATION",e),l(Je({},o,{show:!1})),je.b.success(e.data.message)})).catch((function(e){console.log("ACCOUNT ACTIVATION ERROR",e.response.data.error),je.b.error(e.response.data.error)}))});return r.a.createElement(y,null,r.a.createElement("div",{className:"col-md-6 offset-md-3"},r.a.createElement(je.a,null),r.a.createElement("div",{className:"text-center"},r.a.createElement("h1",{className:"p-5"},"Hey ",i,", Ready to activate your account?"),r.a.createElement("button",{className:"btn btn-outline-primary",onClick:u},"Activate Account"))))};function qe(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Fe(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?qe(a,!0).forEach((function(t){Object(s.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):qe(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var ze=function(e){e.history;var t=Object(n.useState)({email:"",buttonText:"Request password reset link"}),a=Object(m.a)(t,2),c=a[0],o=a[1],l=c.email,i=c.buttonText,u=function(e){e.preventDefault(),o(Fe({},c,{buttonText:"Submitting"})),k()({method:"PUT",url:"".concat("http://localhost:8000/api","/forgot-password"),data:{email:l}}).then((function(e){console.log("FORGOT PASSWORD SUCCESS",e),je.b.success(e.data.message),o(Fe({},c,{buttonText:"Requested"}))})).catch((function(e){console.log("FORGOT PASSWORD ERROR",e.response.data),je.b.error(e.response.data.error),o(Fe({},c,{buttonText:"Request password reset link"}))}))};return r.a.createElement(y,null,r.a.createElement("div",{className:"col-md-6 offset-md-3"},r.a.createElement(je.a,null),r.a.createElement("h1",{className:"p-5 text-center"},"Forgot password"),function(){return r.a.createElement("form",null,r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-muted"},"Email"),r.a.createElement("input",{onChange:(e="email",function(t){o(Fe({},c,Object(s.a)({},e,t.target.value)))}),value:l,type:"email",className:"form-control"})),r.a.createElement("div",null,r.a.createElement("button",{className:"btn btn-primary",onClick:u},i)));var e}()))};function Le(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Ke(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Le(a,!0).forEach((function(t){Object(s.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Le(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var $e=function(e){var t=e.match,a=Object(n.useState)({name:"",token:"",newPassword:"",buttonText:"Reset password"}),c=Object(m.a)(a,2),o=c[0],l=c[1];Object(n.useEffect)((function(){var e=t.params.token,a=Be.a.decode(e).name;e&&l(Ke({},o,{name:a,token:e}))}),[]);var i=o.name,s=o.token,u=o.newPassword,p=o.buttonText,d=function(e){l(Ke({},o,{newPassword:e.target.value}))},f=function(e){e.preventDefault(),l(Ke({},o,{buttonText:"Submitting"})),k()({method:"PUT",url:"".concat("http://localhost:8000/api","/reset-password"),data:{newPassword:u,resetPasswordLink:s}}).then((function(e){console.log("RESET PASSWORD SUCCESS",e),je.b.success(e.data.message),l(Ke({},o,{buttonText:"Done"}))})).catch((function(e){console.log("RESET PASSWORD ERROR",e.response.data),je.b.error(e.response.data.error),l(Ke({},o,{buttonText:"Reset password"}))}))};return r.a.createElement(y,null,r.a.createElement("div",{className:"col-md-6 offset-md-3"},r.a.createElement(je.a,null),r.a.createElement("h1",{className:"p-5 text-center"},"Hey ",i,", Type your new password"),r.a.createElement("form",null,r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-muted"},"Email"),r.a.createElement("input",{onChange:d,value:u,type:"password",className:"form-control",placeholder:"Type new password",required:!0})),r.a.createElement("div",null,r.a.createElement("button",{className:"btn btn-primary",onClick:f},p)))))},He=function(){return r.a.createElement(l.a,null,r.a.createElement(i.d,null,r.a.createElement(i.b,{path:"/",exact:!0,component:H}),r.a.createElement(i.b,{path:"/shop",exact:!0,component:pe}),r.a.createElement(i.b,{path:"/mercari",exact:!0,component:_e}),r.a.createElement(i.b,{path:"/auth/password/forgot",exact:!0,component:ze}),r.a.createElement(i.b,{path:"/auth/activate/:token",exact:!0,component:Me}),r.a.createElement(i.b,{path:"/auth/password/reset/:token",exact:!0,component:$e}),r.a.createElement(i.b,{path:"/signin",exact:!0,component:R}),r.a.createElement(i.b,{path:"/signup",exact:!0,component:j}),r.a.createElement(V,{path:"/user/dashboard",exact:!0,component:Y}),r.a.createElement(Q,{path:"/admin/dashboard",exact:!0,component:X}),r.a.createElement(Q,{path:"/create/category",exact:!0,component:ee}),r.a.createElement(Q,{path:"/create/product",exact:!0,component:oe}),r.a.createElement(i.b,{path:"/product/:productId",exact:!0,component:de}),r.a.createElement(i.b,{path:"/cart",exact:!0,component:Ne}),r.a.createElement(Q,{path:"/admin/orders",exact:!0,component:Oe}),r.a.createElement(V,{path:"/profile/:userId",exact:!0,component:Se}),r.a.createElement(Q,{path:"/admin/products",exact:!0,component:ke}),r.a.createElement(Q,{path:"/admin/product/update/:productId",exact:!0,component:Te})))};o.a.render(r.a.createElement(He,null),document.getElementById("root"))},53:function(e,t,a){}},[[132,1,2]]]);
//# sourceMappingURL=main.2fe3c040.chunk.js.map